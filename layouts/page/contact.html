{{ define "main" }}
{{ partial "page-title.html" . }}

<section class="contact-form-wrap section">
  <div class="container">
    {{ if .Content }}
    <div class="row mb-5 justify-content-center">
      <div class="col-lg-8 text-center">
        <i class="ti-quote-left text-color d-block mb-3" style="font-size:2rem"></i>
        <blockquote class="border-0 p-0" style="font-size:1.15rem;font-style:italic">
          {{ .Content }}
        </blockquote>
        {{ with .Params.quote }}
        <div class="mt-3">
          <strong>{{ .author }}</strong>
          {{ with .role }}<br><small class="text-muted">{{ . }}</small>{{ end }}
        </div>
        {{ end }}
      </div>
    </div>
    {{ end }}
    {{ if .Params.form }}
    {{/* --- Layout with contact form --- */}}
    <div class="row">
      <div class="col-lg-12 col-md-12 col-sm-12">
        {{ with .Params.form }}
        <span class="text-color">{{ .subtitle }}</span>
        <h3 class="text-md mb-5">{{ .title }}</h3>

        <div class="row">
          <div class="col-lg-8">
            <form id="contact-form" class="contact__form " method="post" action="mail.php">
              <div class="row">
                <div class="col-12">
                  <div class="alert alert-success contact__msg" style="display: none" role="alert">
                    {{ .success_message }}
                  </div>
                </div>
              </div>

              <div class="form-group">
                <select class="form-control" id="exampleFormControlSelect1">
                  {{ range .options }}
                  <option>{{ . }}</option>
                  {{ end }}
                </select>
              </div>

              <div class="form-group">
                <input name="subject" id="subject" type="text" class="form-control" placeholder="Your Subject">
              </div>
              <div class="form-group">
                <input name="name" id="name" type="text" class="form-control" placeholder="Your Name">
              </div>
              <div class="form-group">
                <input name="email" id="email" type="email" class="form-control" placeholder="Email Address">
              </div>
              <div class="form-group-2 mb-4">
                <textarea name="message" id="message" class="form-control" rows="4"
                  placeholder="Your Message"></textarea>
              </div>
              <button class="btn btn-main" name="submit" type="submit">Send Message</button>
            </form>
          </div>

          {{ with $.Params.sidebar }}
          <div class="col-lg-4">
            <div class="short-info mt-5 mt-lg-0">
              <ul class="list-unstyled">
                <li>
                  <h5>{{ .labels.phone | default "Call Us" }}</h5>
                  {{ .phone }}
                </li>
                <li>
                  <h5>{{ .labels.email | default "Email Us" }}</h5>
                  {{ .email }}
                </li>
                <li>
                  <h5>{{ .labels.address | default "Location Map" }}</h5>
                  {{ .address }}
                </li>
              </ul>

              <ul class="social-icons list-inline mt-5">
                {{ range .socials }}
                <li class="list-inline-item">
                  <a href="{{ .url }}" target="_blank"><i class="{{ .icon }}"></i></a>
                </li>
                {{ end }}
              </ul>
            </div>
          </div>
          {{ end }}
        </div>
        {{ end }}
      </div>
    </div>

    {{ with .Params.map }}
    <div class="row">
      <div class="col-lg-12">
        <div class="google-map mt-90 mb-5">
          {{ partial "osm-map.html" . }}
        </div>
      </div>
    </div>
    {{ end }}

    <div class="row">
      {{ range .Params.offices }}
      <div class="col-lg-4 col-md-6">
        <div class="contact-content pl-lg-5 mt-5 mt-lg-0 mb-5 mb-lg-0">
          <h4 class="mb-4">{{ .name }}</h4>
          <ul class="address-block list-unstyled">
            <li><i class="ti-location-pin mr-3"></i>{{ .address }}</li>
            <li><i class="ti-email mr-3"></i>Email: <a href="mailto:{{ .email }}">{{ .email }}</a></li>
            <li><i class="ti-mobile mr-3"></i>Phone: <a href="tel:{{ .phone }}">{{ .phone }}</a></li>
          </ul>
        </div>
      </div>
      {{ end }}
    </div>

    {{ else }}
    {{ with .Site.Params.formspark_form_id }}
    {{/* --- Layout with Formspark form + sidebar + map --- */}}
    <div class="row">
      <div class="col-lg-8 col-md-7">
        <form action="https://submit-form.com/{{ . }}" method="POST">
          <input type="hidden" name="_redirect" value="{{ "kontakt/gesendet/" | absURL }}">
          <input type="hidden" name="_error" value="{{ "kontakt/fehler/" | absURL }}">
          <input type="hidden" name="_append" value="false">
          <input type="hidden" name="_email.subject" value="Neue Kontaktanfrage über {{ $.Site.Title }}">
          <input type="hidden" name="_email.from" value="{{ $.Site.Title }}">

          {{/* Honeypot – custom field name configured in Formspark dashboard + hugo.toml.
               Visually hidden via positioning (not display:none) with an enticing label. */}}
          {{ $hp := $.Site.Params.formspark_honeypot | default "_honeypot" }}
          <div aria-hidden="true" style="position:absolute;left:-9999px;height:0;overflow:hidden">
            <label for="{{ $hp }}">Website</label>
            <input type="text" name="{{ $hp }}" id="{{ $hp }}" tabindex="-1" autocomplete="off" value="">
          </div>

          <div class="form-group">
            <label for="name">Name <span class="text-danger">*</span></label>
            <input type="text" name="name" id="name" class="form-control" placeholder="Ihr Name" required>
          </div>
          <div class="form-group">
            <label for="email">E-Mail <span class="text-danger">*</span></label>
            <input type="email" name="email" id="email" class="form-control" placeholder="Ihre E-Mail-Adresse" required>
          </div>
          <div class="form-group">
            <label for="phone">Telefon</label>
            <input type="tel" name="phone" id="phone" class="form-control" placeholder="Ihre Telefonnummer (optional)">
          </div>
          <div class="form-group mb-4">
            <label for="message">Nachricht <span class="text-danger">*</span></label>
            <textarea name="message" id="message" class="form-control" rows="5" placeholder="Ihre Nachricht" required></textarea>
          </div>
          <button type="submit" class="btn btn-main">Nachricht senden</button>
        </form>
      </div>

      {{ with $.Params.sidebar }}
      <div class="col-lg-4 col-md-5">
        <div class="short-info mt-5 mt-md-0">
          <ul class="list-unstyled">
            <li>
              <h5>{{ .labels.phone | default "Call Us" }}</h5>
              <a href="tel:{{ .phone }}">{{ .phone }}</a>
            </li>
            <li>
              <h5>{{ .labels.email | default "Email Us" }}</h5>
              <a href="mailto:{{ .email }}">{{ .email }}</a>
            </li>
            <li>
              <h5>{{ .labels.address | default "Location Map" }}</h5>
              {{ .address }}
            </li>
          </ul>
        </div>
      </div>
      {{ end }}
    </div>

    {{ with $.Params.map }}
    <div class="row">
      <div class="col-lg-12">
        <div class="google-map mt-90 mb-5">
          {{ partial "osm-map.html" . }}
        </div>
      </div>
    </div>
    {{ end }}

    {{ else }}
    {{/* --- Layout without form: map + sidebar side by side --- */}}
    <div class="row">
      {{ with $.Params.map }}
      <div class="col-lg-8 col-md-7">
        <div class="google-map">
          {{ partial "osm-map.html" . }}
        </div>
      </div>
      {{ end }}

      {{ with $.Params.sidebar }}
      <div class="col-lg-4 col-md-5">
        <div class="short-info mt-5 mt-md-0">
          <ul class="list-unstyled">
            <li>
              <h5>{{ .labels.phone | default "Call Us" }}</h5>
              <a href="tel:{{ .phone }}">{{ .phone }}</a>
            </li>
            <li>
              <h5>{{ .labels.email | default "Email Us" }}</h5>
              <a href="mailto:{{ .email }}">{{ .email }}</a>
            </li>
            <li>
              <h5>{{ .labels.address | default "Location Map" }}</h5>
              {{ .address }}
            </li>
          </ul>

          <ul class="social-icons list-inline mt-5">
            {{ range .socials }}
            <li class="list-inline-item">
              <a href="{{ .url }}"><i class="{{ .icon }}"></i></a>
            </li>
            {{ end }}
          </ul>
        </div>
      </div>
      {{ end }}
    </div>
    {{ end }}
    {{ end }}
  </div>
</section>
{{ end }}